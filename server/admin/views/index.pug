html

    head
        include ../templates/head
        link(rel="stylesheet" href="/s/admin/css/home.css")

    body
        #app
            nav.navbar.navbar-expand-lg.navbar-dark.bg-dark
                button.mr-2.navbar-toggler.d-md-none(type="button" @click="showCollapseMenu = !showCollapseMenu")
                    span.navbar-toggler-icon

                a.mr-auto.navbar-brand.d-flex.align-items-center(href="/s/admin")
                    include ../img/logo-no-tag.svg
                    include ../img/logo-r.svg
                    span.app-name
                        span.d-none.d-md-inline-block.mr-2
                            |Website
                        |Admin

                div.navbar-nav-wrapper.bg-dark.d-sm-flex.align-items-center.flex-fill.ml-md-3
                    h5.d-sm-none.text-muted.font-weight-light
                        |Menu
                    ul.navbar-nav.mr-auto.flex-md-row
                        li.nav-item
                            a.nav-link(href=publicRoot target="_blank")
                                icon(name="globe").mr-1
                                |View Website
                        li(v-if="pages.length > 1" :class="['nav-item dropdown', { show: showPagesDropdown }]" ref="pagesDropdown")
                            a.nav-link.dropdown-toggle.no-toggle-icon(href="javascript:void(0)" @click="showPagesDropdown = !showPagesDropdown")
                                icon(name="file").mr-1
                                |Pages
                                icon(name="chevron-down").ml-1
                            div(:class="['dropdown-menu', { show: showPagesDropdown }]")
                                a(v-for="page in pages"
                                    :key="page.id"
                                    :class="['dropdown-item', { active: activePage ===  page.id}]"
                                    href="javascript:void(0)"
                                    @click.prevent="activePage = page.id"
                                )
                                    |{{ page.name }}

                button.btn.btn-primary.d-none.d-md-inline-block(@click="publish")
                    |Publish
                button.btn.btn-primary.btn-sm.d-md-none(@click="publish")
                    |Publish

            .container-fluid.pt-3
                h2.mb-4
                    icon(name="home").mr-2
                    |Home

                h3
                    |Main Image

                div(v-show="!imagePreviews['home-main']")
                    button.btn.btn-secondary(@click="imagePreviews['home-main'] = {}")
                        icon(name="edit").mr-1
                        |Edit
                    .mt-2.row
                        .col-lg-6
                            img.img-fluid(
                                srcset="/s/admin/uploads/images/home-main.jpg, /s/admin/uploads/images/home-main@2x.jpg 2x"
                                src="/s/admin/uploads/images/home-main.jpg"
                                ref="home-main"
                            )

                div(v-show="!!imagePreviews['home-main']")
                    button.btn.btn-primary(
                        v-show="imagePreviews['home-main'] && imagePreviews['home-main'].img"
                        @click="uploadCropped('home-main')"
                    )
                        icon(name="check-circle").mr-1
                        |Done
                    button.btn.btn-outline-danger(@click="closeImageUpload('home-main')")
                        icon(name="x-circle").mr-1
                        |Cancel
                    .mt-2.row
                        .col-lg-6
                            file-upload(
                                v-show="!imagePreviews['home-main'] || !imagePreviews['home-main'].img"
                                name="file"
                                description="Drop a file here, or click 'Browse'"
                                @change="handleImageChange($event, 'home-main')"
                            )
                            div(v-show="imagePreviews['home-main'] && imagePreviews['home-main'].img")
                                canvas(ref="home-main-preview").img-fluid




        //- Components
        include ../components/icon/icon
        include ../components/file-upload/file-upload

        script(src="/s/admin/js/main.js")
